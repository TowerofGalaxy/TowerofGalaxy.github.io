<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n-key="pageTitle">愿塔佑你千生无厄</title>

    <!-- Google Fonts: 引入优雅的网页字体 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Serif+SC:wght@400;700&display=swap"
        rel="stylesheet">

    <style>
        /* --- 核心变量 --- */
        :root {
            --font-main: "Noto Serif SC", serif;
            --font-special: "Ma Shan Zheng", cursive;

            --primary-color: #1a2836;
            --accent-color: #8e44ad;
            --accent-rgb: 142, 68, 173;
            --text-color: #34495e;
            --bg-color: #f4f7f9;
            --card-bg: rgba(255, 255, 255, 0.85);
            --shadow-color-light: rgba(0, 0, 0, 0.08);
            --shadow-color-dark: rgba(0, 0, 0, 0.12);

            --transition-speed-fast: 0.3s;
            --transition-speed-normal: 0.5s;
        }

        .dark-mode {
            --primary-color: #eef2f5;
            --accent-color: #9b59b6;
            --accent-rgb: 155, 89, 182;
            --text-color: #b0c4de;
            --bg-color: #1f2937;
            --card-bg: rgba(26, 40, 54, 0.7);
            --shadow-color-light: rgba(0, 0, 0, 0.2);
            --shadow-color-dark: rgba(0, 0, 0, 0.3);
        }

        /* --- 主题切换过渡 --- */
        ::view-transition-old(root),
        ::view-transition-new(root) {
            animation: none;
            mix-blend-mode: normal;
        }

        ::view-transition-image-pair(root) {
            isolation: auto;
        }

        /* --- 基础与背景 --- */
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--font-main);
            line-height: 1.9;
            margin: 0;
            min-height: 100vh;
            transition: background-color var(--transition-speed-normal) ease, color var(--transition-speed-normal) ease;
        }

        /* --- 控件组 --- */
        .control-group {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 1001;
        }

        .theme-switcher,
        .lang-switcher,
        .qq-group {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 4px 12px var(--shadow-color-light), 0 0 0 1px rgba(255, 255, 255, 0.05);
            border-radius: 30px;
            transition: all var(--transition-speed-fast) cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        .theme-switcher:hover,
        .qq-group:hover {
            transform: scale(1.08);
            box-shadow: 0 8px 20px var(--shadow-color-dark);
        }

        .theme-switcher {
            display: flex;
            align-items: center;
            padding: 8px;
            cursor: pointer;
            border: none;
            overflow: hidden;
        }

        .theme-icon {
            width: 24px;
            height: 24px;
            color: var(--primary-color);
            transition: color var(--transition-speed-normal) ease;
        }

        .theme-icon-sun {
            display: none;
        }

        .theme-icon-moon {
            display: block;
        }

        .dark-mode .theme-icon-sun {
            display: block;
        }

        .dark-mode .theme-icon-moon {
            display: none;
        }

        .lang-switcher {
            display: flex;
            padding: 4px;
        }

        .lang-btn {
            padding: 8px 14px;
            border: none;
            background: transparent;
            color: var(--text-color);
            cursor: pointer;
            border-radius: 24px;
            font-size: 0.9rem;
            transition: all var(--transition-speed-fast) ease;
        }

        .lang-btn.active {
            color: var(--accent-color);
            background: rgba(var(--accent-rgb), 0.15);
        }

        .qq-group {
            position: fixed;
            bottom: 30px;
            right: 30px;
            padding: 10px 18px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            border: none;
            z-index: 1000;
        }

        .qq-group-icon {
            width: 20px;
            height: 20px;
            color: var(--accent-color);
        }

        .qq-group span {
            font-size: 0.9rem;
            color: var(--primary-color);
        }

        /* --- 内容容器 --- */
        .container {
            max-width: 720px;
            margin: 7rem auto 4rem;
            padding: clamp(1.5rem, 5vw, 3rem);
            /* 流式内边距 */
            background: var(--card-bg);
            border-radius: 16px;
            box-shadow: 0 10px 40px var(--shadow-color-dark);
            transition: background-color var(--transition-speed-normal) ease;
            animation: fadeIn 1.2s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
        }

        h1 {
            /* 流式字体大小 */
            font-size: clamp(2rem, 6vw, 2.8rem);
            font-weight: 700;
            color: var(--primary-color);
            text-align: center;
            margin: 1rem 0 2.5rem;
            position: relative;
            padding-bottom: 1rem;
        }

        h1::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: var(--accent-color);
            border-radius: 2px;
        }

        p {
            font-size: clamp(1rem, 2.5vw, 1.1rem);
            text-align: justify;
            margin: 1.8rem 0;
        }

        .divider {
            text-align: center;
            margin: 3rem 0;
            color: var(--accent-color);
            font-size: 1.5rem;
            letter-spacing: 0.5em;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }

        .divider.visible {
            opacity: 0.6;
            transform: translateY(0);
        }

        .blessing {
            font-family: var(--font-special);
            font-size: clamp(1.8rem, 5vw, 2.2rem);
            color: var(--accent-color);
            text-shadow: 1px 1px 10px rgba(var(--accent-rgb), 0.2);
            margin: 3rem 0 1rem;
            padding: 1.5rem;
            text-align: center;
            border-image: linear-gradient(to right, transparent, var(--accent-color), transparent) 1;
            border-width: 0 0 2px 0;
            border-style: solid;
        }

        /* --- 动态提示与动画 --- */
        .copy-tip {
            position: fixed;
            bottom: 95px;
            /* 调整位置避免和QQ按钮重叠 */
            right: 30px;
            background: #2ecc71;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1rem;
            font-family: var(--font-main);
            box-shadow: 0 6px 20px rgba(46, 204, 113, 0.4);
            animation: popInAndOut 3s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards;
            z-index: 2000;
        }

        @keyframes popInAndOut {
            0% {
                opacity: 0;
                transform: translateY(20px) scale(0.8);
            }

            15% {
                opacity: 1;
                transform: translateY(0) scale(1.05);
            }

            25% {
                transform: translateY(0) scale(1);
            }

            80% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }

            100% {
                opacity: 0;
                transform: translateY(-20px) scale(0.8);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* --- 响应式设计 --- */
        @media (max-width: 768px) {
            .control-group {
                top: 15px;
                right: 15px;
            }

            .container {
                margin: 6rem auto 3rem;
            }

            .qq-group {
                bottom: 20px;
                right: 20px;
                padding: 12px;
                /* 缩小为圆形 */
            }

            .qq-group span {
                display: none;
            }

            .copy-tip {
                bottom: 85px;
                right: 20px;
            }
        }
    </style>
</head>

<body>
    <!-- 控件 -->
    <div class="control-group">
        <div class="lang-switcher">
            <button class="lang-btn active" data-lang="zh-CN">简</button>
            <button class="lang-btn" data-lang="zh-TW">繁</button>
            <button class="lang-btn" data-lang="en">EN</button>
        </div>
        <button class="theme-switcher" aria-label="切换主题">
            <!-- 太阳图标 (Feather Icons) -->
            <svg class="theme-icon theme-icon-sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round">
                <circle cx="12" cy="12" r="5"></circle>
                <line x1="12" y1="1" x2="12" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="23"></line>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                <line x1="1" y1="12" x2="3" y2="12"></line>
                <line x1="21" y1="12" x2="23" y2="12"></line>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
            <!-- 月亮图标 (Feather Icons) -->
            <svg class="theme-icon theme-icon-moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
        </button>
    </div>

    <!-- QQ群按钮 -->
    <button class="qq-group" id="qqGroup" aria-label="复制星之塔QQ群号：512575972">
        <!-- 复制图标 (Feather Icons) -->
        <svg class="qq-group-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
        </svg>
        <span data-i18n-key="qqGroupText"></span>
    </button>

    <!-- 内容区域 -->
    <div class="container">
        <h1 data-i18n-key="mainTitle"></h1>
        <p data-i18n-key="p1"></p>
        <div class="divider">✦ ✦ ✦</div>
        <p data-i18n-key="p2"></p>
        <p data-i18n-key="p3"></p>
        <div class="divider">✦ ✦ ✦</div>
        <p data-i18n-key="p4"></p>
        <div class="divider">✦ ✦ ✦</div>
        <p data-i18n-key="p5"></p>
        <p class="blessing" data-i18n-key="blessing"></p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const translations = {
                "zh-CN": {
                    pageTitle: "愿塔佑你千生无厄", mainTitle: "星兆初现：星之塔创世纪",
                    p1: "孩子们，你们知道吗？在很久很久以前，我们生活的这个世界是没有昼夜交替的。我们的祖先生活在一个只有黑暗的世界——一个长达万年的永夜时代。",
                    p2: "传说神在创世之时，认为炽热的太阳只会为世界带来灾难，所以祂用无边的乌云遮住了太阳的光辉。神以自己为原型创造了人类，将自己的部分神力化作世界的灵魂之气，借助着灵魂之气创造了其余四族：灵、龙、兽、翼。",
                    p3: "神害怕祂所创造之物无法在黑暗中认清方向，祂赐予他们火种，赋予他们文明的种子。",
                    p4: "这是《归世录》里关于神创世的大体内容。至于如今的光明从何而来呢？伟大的塔冲破了乌云的笼罩，塔的降临为我们的世界带来了光明。",
                    p5: "在塔降世前，这片大陆曾战乱不断。孩子们，多亏了伟大的塔，我们才能活在和平的年代。让我们为塔的存在，献上虔诚的信仰。",
                    blessing: "愿塔佑你千生无厄", qqGroupText: "QQ群：512575972", copySuccess: "群号已复制!",
                },
                "zh-TW": {
                    pageTitle: "願塔佑你千生無厄", mainTitle: "星兆初現：星之塔創世紀",
                    p1: "孩子們，你們知道嗎？在很久很久以前，我們生活的這個世界是沒有晝夜交替的。我們的祖先生活在一個只有黑暗的世界——一個長達萬年的永夜時代。",
                    p2: "傳說神在創世之時，認為熾熱的太陽只會為世界帶來災難，所以祂用無邊的烏雲遮住了太陽的光輝。神以自己為原型創造了人類，將自己的部分神力化作世界的靈魂之氣，借助著靈魂之氣創造了其餘四族：靈、龍、獸、翼。",
                    p3: "神害怕祂所創造之物無法在黑暗中認清方向，祂賜予他們火種，賦予他們文明的種子。",
                    p4: "這是《歸世錄》裡關於神創世的大體內容。至於如今的光明從何而來呢？偉大的塔衝破了烏雲的籠罩，塔的降臨為我們的世界帶來了光明。",
                    p5: "在塔降世前，這片大陸曾戰亂不斷。孩子們，多虧了偉大的塔，我們才能活在和平的年代。讓我們為塔的存在，獻上虔誠的信仰。",
                    blessing: "願塔佑你千生無厄", qqGroupText: "QQ群：512575972", copySuccess: "群號已複製!",
                },
                "en": {
                    pageTitle: "May the Tower bless you", mainTitle: "Stellar Dawn: The Genesis of Star Tower",
                    p1: "Children, did you know? In the distant past, our world had no alternation between day and night. Our ancestors lived in a world of perpetual darkness—an eternal night lasting ten thousand years.",
                    p2: "Legend says that during creation, the deity believed the blazing sun would only bring disaster. Therefore, He veiled the sun's radiance with endless dark clouds. Creating humans in His own image, He transformed part of His divine power into the world's spiritual essence, using this essence to create four other races: Spirits, Dragons, Beasts, and Winged Ones.",
                    p3: "Fearing His creations would lose their way in darkness, He bestowed upon them the flame of fire and the seeds of civilization.",
                    p4: "This is the general account of divine creation from the 'Chronicles of Return'. As for the origin of our current light? The great Tower pierced through the shroud of dark clouds, its arrival bringing illumination to our world.",
                    p5: "Before the Tower's descent, this continent was plagued by endless wars. Children, it is thanks to the great Tower that we live in an era of peace. Let us offer devout faith for the existence of the Tower.",
                    blessing: "May the Tower bless you with eternal fortune", qqGroupText: "QQ Group: 512575972", copySuccess: "Group ID Copied!",
                }
            };
            let currentLang = localStorage.getItem('language') || 'zh-CN';

            function setLanguage(lang) {
                currentLang = lang;
                localStorage.setItem('language', lang);
                document.documentElement.lang = lang;
                document.querySelectorAll('[data-i18n-key]').forEach(el => {
                    const key = el.getAttribute('data-i18n-key');
                    el.textContent = translations[lang][key] || key;
                });
                document.querySelectorAll('.lang-btn').forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.lang === lang);
                });
            }

            document.querySelector('.lang-switcher').addEventListener('click', (e) => {
                if (e.target.matches('.lang-btn')) setLanguage(e.target.dataset.lang);
            });

            const themeSwitcher = document.querySelector('.theme-switcher');
            function applyTheme(theme) {
                document.body.classList.toggle('dark-mode', theme === 'dark-mode');
                localStorage.setItem('theme', theme);
            }

            themeSwitcher.addEventListener('click', (e) => {
                const isDark = document.body.classList.contains('dark-mode');
                const newTheme = isDark ? '' : 'dark-mode';

                // 优先使用 View Transitions API
                if (document.startViewTransition) {
                    const transition = document.startViewTransition(() => {
                        applyTheme(newTheme);
                    });

                    transition.ready.then(() => {
                        const { clientX: x, clientY: y } = e;
                        const endRadius = Math.hypot(Math.max(x, window.innerWidth - x), Math.max(y, window.innerHeight - y));
                        document.documentElement.animate(
                            { clipPath: [`circle(0% at ${x}px ${y}px)`, `circle(${endRadius}px at ${x}px ${y}px)`] },
                            { duration: 600, easing: 'ease-in-out', pseudoElement: '::view-transition-new(root)' }
                        );
                    });
                } else {
                    // Fallback for browsers that don't support View Transitions
                    applyTheme(newTheme);
                }
            });

            const qqGroupButton = document.getElementById('qqGroup');
            qqGroupButton.addEventListener('click', () => {
                navigator.clipboard.writeText('512575972').then(() => {
                    const टिप = document.createElement('div');
                    टिप.className = 'copy-tip';
                    टिप.textContent = translations[currentLang].copySuccess;
                    document.body.appendChild(टिप);
                    setTimeout(() => टिप.remove(), 3000);
                }).catch(err => console.error('Failed to copy: ', err));
            });

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.5 });
            document.querySelectorAll('.divider').forEach(el => observer.observe(el));

            applyTheme(localStorage.getItem('theme') || '');
            setLanguage(currentLang);
        });
    </script>
</body>

</html>
